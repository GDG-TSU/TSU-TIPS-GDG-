<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "../styles/generateTip.css">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
    <title>Generate Tip</title>
</head>

 <header id = "genHead">
    <a href="Homepage.html">
    <img  class = "animate__animated animate__fadeInLeft" id = "textLogo" src = "../assets/TSU_textLogo.png" width = 200>
    </a>

    <ul>
        <li class = "animate__animated animate__fadeInLeft">
            <a>Submit Tip</a>
        </li>
        <li class = "animate__animated animate__fadeInLeft">
            <a> Categories</a> 
        </li>
        <li class = "animate__animated animate__fadeInLeft">
            <a>About Us</a>
        </li>
    </ul>
</header>
<body class = "test">
    <div id = "contain">
        <div id = "listOfTips">

        </div>

    </div>

    <div class = "genButtonContainer">
        <button class = "animate__animated animate__fadeInLeft" id = "genButton" onclick="newTip();">
            <p1 class ="genButtonText">Generate Tip</p1>
        </button>
    </div>

    <div class = "cornerImage">
    </div>

</body>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
<script>
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";

    // Firebase config
    const firebaseConfig = {
        apiKey: "AIzaSyBNVtJXtXLSX-Q0Rf5C_ZGLp0rbL5GD6Fg",
        authDomain: "tsu-tips.firebaseapp.com",
        projectId: "tsu-tips",
        storageBucket: "tsu-tips.firebasestorage.app",
        messagingSenderId: "888234284095",
        appId: "1:888234284095:web:5dfdb0dbecc6769b7d148a",
        measurementId: "G-VS03GGC4H5"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Reference to the collection
    const myCollection = collection(db, "tips");

    async function getData() {
        const documents = query(myCollection);
        const docs = await getDocs(documents);
        const listOfTips = [];

        docs.forEach((doc) => {
            listOfTips.push(doc.data());
        });


        if(listOfTips.length > 0){
            const randomIndex = Math.floor(Math.random() * listOfTips.length);
            const randomTip = listOfTips[randomIndex];

            const h2 = document.createElement("h2");
            h2.innerHTML = randomTip.category;


            
        }
        else{
            console.log("No documents available in the database");
        }
    }



</script>
</html> 